<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso de Inteligencia Artificial - Nivel Explorador</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #d1d5db;
        }
        .card {
            background-color: #1f2937;
            border: 1px solid #374151;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            text-align: center;
            transition: background-color 0.3s, transform 0.3s;
            cursor: pointer;
        }
        .btn-primary {
            background-color: #2563eb;
            color: white;
        }
        .btn-primary:hover:not(:disabled) {
            background-color: #1d4ed8;
            transform: scale(1.05);
        }
         .btn-secondary {
            background-color: #4b5563;
            color: white;
        }
        .btn-secondary:hover:not(:disabled) {
            background-color: #374151;
            transform: scale(1.05);
        }
         .btn-warning {
            background-color: #ca8a04; /* Yellow-600 */
            color: white;
        }
        .btn-warning:hover:not(:disabled) {
            background-color: #a16207; /* Yellow-700 */
             transform: scale(1.05);
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .code-block {
            background-color: #0d1117;
            color: #c9d1d9;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            font-family: 'Courier New', Courier, monospace;
            overflow-x: auto;
            white-space: pre;
        }
        /* Sidebar Styles */
        #sidebar {
            width: 16rem; /* 256px */
            transition: width 0.3s ease-in-out;
        }
        #sidebar.sidebar-collapsed {
            width: 5rem; /* 80px */
        }
        .sidebar-collapsed .sidebar-text, .sidebar-collapsed .sidebar-title, .sidebar-collapsed .sidebar-subtitle {
            display: none;
        }
        .sidebar-collapsed .nav-item {
            justify-content: center;
        }
        .sidebar-collapsed details summary .fa-chevron-down {
            display: none;
        }
        .active-link {
            background-color: #2563eb;
            color: white;
        }
        .nav-item.disabled {
            color: #6b7280; /* Gray */
            pointer-events: none;
            cursor: default;
        }
        .nav-item.disabled i {
             color: #4b5563;
        }
         .nav-item.disabled:hover {
             background-color: transparent;
         }
         details.disabled summary {
             color: #6b7280;
             pointer-events: none;
             cursor: default;
         }
         details.disabled summary i:first-child {
              color: #4b5563;
         }

        /* Main Content Margin Control */
        #main-content {
            transition: margin-left 0.3s ease-in-out;
        }
         @media (min-width: 768px) {
            #main-content {
                margin-left: 16rem;
            }
            body.sidebar-is-collapsed #main-content {
                margin-left: 5rem;
            }
        }
        /* Details/Summary for Mission Accordion */
        details summary {
            list-style: none;
            cursor: pointer;
        }
        details summary::-webkit-details-marker {
            display: none;
        }
        details summary .fa-chevron-down {
            transition: transform 0.2s;
        }
        details[open] summary .fa-chevron-down {
            transform: rotate(180deg);
        }
        /* Quiz Styles */
        .quiz-option {
            border: 2px solid transparent;
            transition: border-color 0.2s, background-color 0.2s;
        }
        .quiz-option:hover {
            background-color: #374151;
        }
        .quiz-option.selected-correct {
            border-color: #16a34a; /* Green-500 */
            background-color: rgba(22, 163, 74, 0.1);
        }
         .quiz-option.selected-incorrect {
            border-color: #dc2626; /* Red-600 */
            background-color: rgba(220, 38, 38, 0.1);
        }
         /* REMOVED .actual-correct style */
        .quiz-feedback {
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
        }
        .correct {
            background-color: #166534;
            color: #dcfce7;
        }
        .incorrect {
            background-color: #991b1b;
            color: #fee2e2;
        }
        .repaso-section {
             margin-top: 1.5rem;
             padding-top: 1rem;
             border-top: 1px dashed #4b5563;
        }
        /* Details for step-by-step */
        details.step-by-step > summary {
            cursor: pointer;
            font-weight: 600;
            color: #93c5fd;
            padding: 0.5rem;
            border-radius: 0.5rem;
            background-color: #1e3a8a;
        }
        details.step-by-step > summary:hover {
            background-color: #1d4ed8;
        }
        .details-content {
            margin-top: 1rem;
            padding-left: 1rem;
            border-left: 2px solid #374151;
        }
        .quiz-container {
            border-top: 1px solid #374151;
            margin-top: 2rem;
            padding-top: 1.5rem;
        }
        .quiz-question p { /* Ensure question text doesn't get borders */
             border: none !important;
             padding: 0 !important;
        }
    </style>
</head>
<body class="">

    <!-- Sidebar de Navegación -->
    <aside id="sidebar" class="bg-gray-900 text-white min-h-screen p-4 fixed top-0 left-0 z-40 transform -translate-x-full md:translate-x-0 flex flex-col">
       <!-- Sidebar Content (sin cambios estructurales) -->
        <div class="flex-grow overflow-y-auto">
            <h2 class="sidebar-title text-2xl font-bold mb-1 text-blue-400">Ruta de Aprendizaje</h2>
            <h3 class="sidebar-subtitle text-xs text-gray-400 mb-6">IA Nivel Explorador</h3>
            <nav>
                <ul class="space-y-2">
                    <li><a href="#introduccion" id="link-introduccion" data-next="#modulo-cero" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item active-link"><i class="fas fa-rocket w-6 text-center mr-2"></i><span class="sidebar-text">Introducción</span></a></li>
                    <li><a href="#modulo-cero" id="link-modulo-cero" data-quiz="#quiz-modulo-0" data-next="#m1-intro-ia" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-power-off w-6 text-center mr-2"></i><span class="sidebar-text">Módulo 0: Punto de Partida</span></a></li>
                    <li>
                        <details id="mission-1-details" class="sidebar-mission disabled" open>
                            <summary class="flex items-center justify-between p-2 rounded hover:bg-gray-700 nav-item">
                                <div class="flex items-center">
                                    <i class="fas fa-dumbbell w-6 text-center mr-2"></i><span class="sidebar-text text-lg font-semibold text-blue-300">Misión 1</span>
                                </div>
                                <i class="fas fa-chevron-down sidebar-text text-xs text-gray-400"></i>
                            </summary>
                            <ul class="ml-4 space-y-2 text-sm mt-2">
                                <li><a href="#m1-intro-ia" id="link-m1-intro-ia" data-quiz="#quiz-m1-intro-ia" data-next="#m1-python" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-brain w-6 text-center mr-2"></i><span class="sidebar-text">1. ¿Qué es la IA?</span></a></li>
                                <li><a href="#m1-python" id="link-m1-python" data-quiz="#quiz-m1-python" data-next="#m1-pandas" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fab fa-python w-6 text-center mr-2"></i><span class="sidebar-text">2. Python desde Cero</span></a></li>
                                <li><a href="#m1-pandas" id="link-m1-pandas" data-quiz="#quiz-m1-pandas" data-next="#m1-visualizacion" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-database w-6 text-center mr-2"></i><span class="sidebar-text">3. Manejo de Datos</span></a></li>
                                <li><a href="#m1-visualizacion" id="link-m1-visualizacion" data-quiz="#quiz-m1-visualizacion" data-next="#m1-metodos-ia" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-chart-bar w-6 text-center mr-2"></i><span class="sidebar-text">4. Visualización de Datos</span></a></li>
                                <li><a href="#m1-metodos-ia" id="link-m1-metodos-ia" data-quiz="#quiz-mission-1" data-next="#m2-colab" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-lightbulb w-6 text-center mr-2"></i><span class="sidebar-text">5. Métodos Básicos de IA</span></a></li>
                            </ul>
                        </details>
                    </li>
                    <li>
                         <details id="mission-2-details" class="sidebar-mission disabled">
                            <summary class="flex items-center justify-between p-2 rounded hover:bg-gray-700 nav-item">
                                <div class="flex items-center">
                                    <i class="fas fa-flask w-6 text-center mr-2"></i><span class="sidebar-text text-lg font-semibold text-blue-300">Misión 2</span>
                                </div>
                                <i class="fas fa-chevron-down sidebar-text text-xs text-gray-400"></i>
                            </summary>
                            <ul class="ml-4 space-y-2 text-sm mt-2">
                                <li><a href="#m2-colab" id="link-m2-colab" data-quiz="#quiz-m2-colab" data-next="#m2-practica-7" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-vial w-6 text-center mr-2"></i><span class="sidebar-text">6. Tu Laboratorio: Google Colab</span></a></li>
                                <li><a href="#m2-practica-7" id="link-m2-practica-7" data-quiz="#quiz-m2-practica-7" data-next="#m2-practica-8" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-code w-6 text-center mr-2"></i><span class="sidebar-text">7. Práctica con Python</span></a></li>
                                <li><a href="#m2-practica-8" id="link-m2-practica-8" data-quiz="#quiz-m2-practica-8" data-next="#m2-practica-9" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-table w-6 text-center mr-2"></i><span class="sidebar-text">8. Práctica con Pandas</span></a></li>
                                <li><a href="#m2-practica-9" id="link-m2-practica-9" data-quiz="#quiz-m2-practica-9" data-next="#m2-practica-10" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-network-wired w-6 text-center mr-2"></i><span class="sidebar-text">9. Práctica de IA (I)</span></a></li>
                                <li><a href="#m2-practica-10" id="link-m2-practica-10" data-quiz="#quiz-m2-practica-10" data-next="#m2-practica-10-1" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-route w-6 text-center mr-2"></i><span class="sidebar-text">10. Práctica: Algoritmo Simple</span></a></li>
                                <li><a href="#m2-practica-10-1" id="link-m2-practica-10-1" data-quiz="#quiz-mission-2" data-next="#m3-proyectos" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-dna w-6 text-center mr-2"></i><span class="sidebar-text">10.1 Práctica: Algoritmos Avanzados</span></a></li>
                            </ul>
                        </details>
                    </li>
                     <li>
                        <details id="mission-3-details" class="sidebar-mission disabled">
                            <summary class="flex items-center justify-between p-2 rounded hover:bg-gray-700 nav-item">
                                <div class="flex items-center">
                                    <i class="fas fa-link w-6 text-center mr-2"></i><span class="sidebar-text text-lg font-semibold text-blue-300">Misión 3</span>
                                </div>
                                <i class="fas fa-chevron-down sidebar-text text-xs text-gray-400"></i>
                            </summary>
                            <ul class="ml-4 space-y-2 text-sm mt-2">
                                <li><a href="#m3-proyectos" id="link-m3-proyectos" data-quiz="#quiz-m3-proyectos" data-next="#m3-co-creacion" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-project-diagram w-6 text-center mr-2"></i><span class="sidebar-text">1. De la Idea al Proyecto</span></a></li>
                                <li><a href="#m3-co-creacion" id="link-m3-co-creacion" data-quiz="#quiz-m3-co-creacion" data-next="#proyecto-final" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-users w-6 text-center mr-2"></i><span class="sidebar-text">2. Co-creación y Aplicación</span></a></li>
                            </ul>
                        </details>
                    </li>
                    <li><a href="#proyecto-final" id="link-proyecto-final" data-next="#final" class="flex items-center p-2 rounded hover:bg-gray-700 nav-item disabled"><i class="fas fa-flag-checkered w-6 text-center mr-2"></i><span class="sidebar-text">Proyecto Final</span></a></li>
                </ul>
            </nav>
        </div>
        <div class="mt-4 flex-shrink-0">
            <button id="desktop-sidebar-toggle" class="hidden md:flex w-full items-center p-2 rounded hover:bg-gray-700 nav-item">
                <i id="desktop-toggle-icon" class="fas fa-angle-double-left w-6 text-center mr-2"></i>
                <span class="sidebar-text">Ocultar Menú</span>
            </button>
        </div>
    </aside>

    <!-- Botón para mostrar/ocultar sidebar en móvil -->
    <button id="mobile-sidebar-toggle" class="md:hidden fixed top-4 left-4 z-50 bg-gray-800 p-2 rounded-md text-white">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Contenido Principal -->
    <main id="main-content" class="flex-1 p-6 md:p-10">
        <div class="max-w-7xl mx-auto">
            <!-- Introducción Section -->
            <section id="introduccion" class="content-section min-h-screen flex flex-col justify-center">
                 <div class="card text-center">
                    <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">Inteligencia Artificial: Nivel Explorador</h1>
                    <p class="text-lg md:text-xl text-gray-300 mb-6">¡Bienvenido/a! Este es tu punto de partida en el fascinante mundo de la tecnología. No necesitas saber nada, te guiaremos desde cero para que puedas crear soluciones inteligentes.</p>
                    <p class="text-md text-gray-400 my-8">Al final de este curso, desarrollarás un proyecto para optimizar rutas de logística en Cundinamarca y Boyacá, aplicando todo lo aprendido.</p>
                    <button id="start-btn" class="btn btn-primary next-btn" data-next="#modulo-cero">¡Comenzar la Aventura!</button>
                </div>
            </section>
    
            <!-- Módulo 0 Section -->
            <section id="modulo-cero" class="content-section hidden">
                 <h2 class="text-3xl font-bold text-white mb-6"><i class="fas fa-power-off mr-3 text-blue-400"></i>Módulo 0: Punto de Partida - Fundamentos Digitales</h2>
                <div class="card">
                    <!-- Contenido detallado de Módulo 0 -->
                    <h3 class="text-2xl font-semibold text-blue-300 mb-3">Lección 0: ¡Hola, Mundo Digital!</h3>
                     <h4 class="text-xl font-semibold text-white mt-6 mb-2">0.1 ¿Qué es una computadora?</h4>
                    <p class="mb-4">Imagina que una computadora es como una cocina súper avanzada.</p>
                    <ul class="list-disc list-inside space-y-2">
                        <li><b>Procesador (CPU):</b> Es el <b class="text-blue-300">chef principal</b>. Es súper rápido pensando y dando órdenes (haciendo cálculos).</li>
                        <li><b>Memoria (RAM):</b> Es la <b class="text-blue-300">mesa de trabajo</b> del chef. Aquí pone los ingredientes (datos) que está usando *ahora mismo*. Es muy rápida, pero se vacía cuando apagas el computador.</li>
                        <li><b>Disco Duro (HDD/SSD):</b> Es la <b class="text-blue-300">despensa y el libro de recetas</b>. Aquí se guarda todo a largo plazo (tus archivos, fotos, el sistema operativo, los programas).</li>
                        <li><b>Sistema Operativo (Windows, macOS):</b> Es el <b class="text-blue-300">gerente de la cocina</b>. Organiza al chef, gestiona la despensa y te permite "dar órdenes" usando el mouse y el teclado.</li>
                    </ul>

                    <h4 class="text-xl font-semibold text-white mt-6 mb-2">0.2 El Pensamiento Lógico: La Receta del Éxito</h4>
                    <p class="mb-4">Un <b class="text-blue-300">algoritmo</b> no es más que una receta: una serie de pasos ordenados, claros y finitos para lograr un objetivo. ¡No es nada más que eso!</p>
                    <p class="mb-2"><b>Ejemplo de Algoritmo (Receta de Café):</b></p>
                    <ol class="list-decimal list-inside ml-4 mb-4">
                        <li>INICIO</li>
                        <li>Tomar una taza.</li>
                        <li>Añadir 1 cucharada de café.</li>
                        <li>Añadir 200ml de agua caliente.</li>
                        <li>Revolver por 10 segundos.</li>
                        <li>FIN</li>
                    </ol>
                    <p>Programar es simplemente traducir estos algoritmos (recetas) a un idioma que la computadora (el chef-robot) pueda entender sin ninguna duda.</p>
                    
                    <h4 class="text-xl font-semibold text-white mt-6 mb-2">0.3 Nuestras Herramientas Clave</h4>
                    <p class="mb-2">No necesitas instalar nada complicado. Solo usaremos una herramienta:</p>
                    <p><b class="text-blue-300">Google Colaboratory (Colab):</b> Es un "cuaderno" especial que se ejecuta en la nube (en los computadores de Google). Combina un editor de código, un ejecutor de código y un editor de texto en un solo lugar. Es la herramienta #1 para aprender ciencia de datos e IA, y es gratis. Empezaremos a usarla en la Misión 2.</p>
                    
                    <!-- Evaluación Módulo 0 -->
                    <div class="quiz-container">
                        <h5 class="font-bold text-lg mb-4 text-blue-300">Evaluación Módulo 0</h5>
                        <form id="quiz-modulo-0" class="quiz-form space-y-6" data-next="#m1-intro-ia" data-unlock-mission="#mission-1-details">
                            <div class="mb-4 quiz-question" data-correct="a"><p class="mb-2 font-medium">1. ¿Qué componente de la computadora es como la "mesa de trabajo" donde se ponen los datos que se usan ahora mismo?</p>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_1" value="a" class="mr-2" id="q0_1_a"> a) Memoria (RAM)</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_1" value="b" class="mr-2" id="q0_1_b"> b) Procesador (CPU)</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_1" value="c" class="mr-2" id="q0_1_c"> c) Disco Duro</label>
                            </div>
                            <div class="mb-4 quiz-question" data-correct="b"><p class="mb-2 font-medium">2. Un algoritmo es fundamentalmente...</p>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_2" value="a" class="mr-2" id="q0_2_a"> a) Un programa de computadora complejo.</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_2" value="b" class="mr-2" id="q0_2_b"> b) Una serie de pasos ordenados para resolver un problema (como una receta).</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_2" value="c" class="mr-2" id="q0_2_c"> c) Inteligencia Artificial.</label>
                            </div>
                             <div class="mb-4 quiz-question" data-correct="c"><p class="mb-2 font-medium">3. ¿Cuál es la principal ventaja de Google Colab para este curso?</p>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_3" value="a" class="mr-2" id="q0_3_a"> a) Es el único programa que existe para IA.</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_3" value="b" class="mr-2" id="q0_3_b"> b) Funciona solo en computadores muy potentes.</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_3" value="c" class="mr-2" id="q0_3_c"> c) Permite escribir y ejecutar código Python en el navegador sin instalar nada.</label>
                            </div>
                             <div class="mb-4 quiz-question" data-correct="a"><p class="mb-2 font-medium">4. El Sistema Operativo (Windows, macOS) se parece a...</p>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_4" value="a" class="mr-2" id="q0_4_a"> a) El gerente de la cocina que organiza todo.</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_4" value="b" class="mr-2" id="q0_4_b"> b) El chef principal que hace los cálculos.</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_4" value="c" class="mr-2" id="q0_4_c"> c) La despensa donde se guarda todo.</label>
                            </div>
                             <div class="mb-4 quiz-question" data-correct="b"><p class="mb-2 font-medium">5. ¿Cuál NO es una característica de un algoritmo?</p>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_5" value="a" class="mr-2" id="q0_5_a"> a) Pasos ordenados.</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_5" value="b" class="mr-2" id="q0_5_b"> b) Ser infinitamente largo.</label>
                                <label class="block cursor-pointer p-3 rounded-lg quiz-option"><input type="radio" name="q0_5" value="c" class="mr-2" id="q0_5_c"> c) Ser claro y sin ambigüedades.</label>
                            </div>
                            <button type="submit" class="btn btn-primary verify-btn">Verificar Respuestas</button>
                            <div class="quiz-feedback hidden"></div>
                            <div class="repaso-section hidden">
                                <h6 class="font-semibold text-yellow-400">Repaso Necesario:</h6>
                                <ul class="list-disc list-inside text-sm mt-2"></ul>
                            </div>
                            <button class="btn btn-warning retry-btn hidden mt-4">Volver a Intentar</button>
                            <button class="btn btn-secondary next-btn hidden mt-4" data-next="#m1-intro-ia">Comenzar Misión 1</button>
                        </form>
                    </div>
                </div>
            </section>
            
            <!-- Resto de secciones con contenido y quizzes adaptados -->
             <!-- Misión 1 Sections -->
             <section id="m1-intro-ia" class="content-section hidden">...</section>
             <section id="m1-python" class="content-section hidden">...</section>
             <section id="m1-pandas" class="content-section hidden">...</section>
             <section id="m1-visualizacion" class="content-section hidden">...</section>
             <section id="m1-metodos-ia" class="content-section hidden">...</section>

             <!-- Misión 2 Sections -->
             <section id="m2-colab" class="content-section hidden">...</section>
             <section id="m2-practica-7" class="content-section hidden">...</section>
             <section id="m2-practica-8" class="content-section hidden">...</section>
             <section id="m2-practica-9" class="content-section hidden">...</section>
             <section id="m2-practica-10" class="content-section hidden">...</section>
             <section id="m2-practica-10-1" class="content-section hidden">...</section>

             <!-- Misión 3 Sections -->
             <section id="m3-proyectos" class="content-section hidden">...</section>
             <section id="m3-co-creacion" class="content-section hidden">...</section>
             <section id="proyecto-final" class="content-section hidden">...</section>

            
        </div>
    </main>
    
    <!-- Modal de Solución (Sin cambios) -->
    <div id="solution-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <!-- Contenido Modal -->
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const body = document.body;
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            const mobileToggle = document.getElementById('mobile-sidebar-toggle');
            const desktopToggle = document.getElementById('desktop-sidebar-toggle');
            const desktopToggleIcon = document.getElementById('desktop-toggle-icon');
            const allSidebarLinks = document.querySelectorAll('#sidebar a.nav-item');
            const contentSections = document.querySelectorAll('.content-section');
            const nextButtons = document.querySelectorAll('.next-btn');
            const retryButtons = document.querySelectorAll('.retry-btn');

            let activeSectionId = 'introduccion';

            function showContent(targetId) {
                contentSections.forEach(section => section.classList.add('hidden'));
                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                    activeSectionId = targetId;
                    allSidebarLinks.forEach(l => l.classList.remove('active-link'));
                    const activeLink = document.querySelector(`#sidebar a[href="#${targetId}"]`);
                    if (activeLink) activeLink.classList.add('active-link');
                    window.scrollTo(0, 0);
                }
            }

            function unlockLink(linkSelector) {
                const link = document.querySelector(linkSelector);
                if (link) link.classList.remove('disabled');
            }

            function unlockMission(missionSelector) {
                 const mission = document.querySelector(missionSelector);
                 if(mission) mission.classList.remove('disabled');
            }
            
             function resetQuizState(form) {
                 const questions = form.querySelectorAll('.quiz-question');
                 const feedbackDiv = form.querySelector('.quiz-feedback');
                 const repasoSection = form.querySelector('.repaso-section');
                 const retryBtn = form.querySelector('.retry-btn');
                 const nextBtn = form.querySelector('.next-btn');
                 const verifyBtn = form.querySelector('.verify-btn');

                 // Reset radio buttons
                 form.reset();

                 // Reset visual feedback
                 questions.forEach(qDiv => {
                     //qDiv.classList.remove('border', 'border-red-500', 'border-green-500', 'rounded-lg', 'p-2'); // Remove border from question div itself
                     qDiv.querySelectorAll('.quiz-option').forEach(opt => {
                         opt.classList.remove('selected-correct', 'selected-incorrect', 'actual-correct'); // Clear option styles
                     });
                 });

                 // Hide feedback sections and buttons
                 if(feedbackDiv) feedbackDiv.classList.add('hidden');
                 if(repasoSection) repasoSection.classList.add('hidden');
                 if(retryBtn) retryBtn.classList.add('hidden');
                 if(nextBtn) nextBtn.classList.add('hidden'); // Ensure next is hidden on retry
                 if(verifyBtn) verifyBtn.disabled = false; // Re-enable verify button

            }

             function handleQuizSubmission(form) {
                 const questions = form.querySelectorAll('.quiz-question');
                 const feedbackDiv = form.querySelector('.quiz-feedback');
                 const repasoSection = form.querySelector('.repaso-section');
                 const repasoList = repasoSection ? repasoSection.querySelector('ul') : null;
                 const nextButton = form.querySelector('.next-btn');
                 const retryButton = form.querySelector('.retry-btn');
                 const verifyButton = form.querySelector('.verify-btn');

                 let allCorrect = true;
                 let incorrectQuestionsInfo = [];

                 // Clear previous visual state from options only
                 questions.forEach(qDiv => {
                     qDiv.querySelectorAll('.quiz-option').forEach(opt => {
                         opt.classList.remove('selected-correct', 'selected-incorrect', 'actual-correct');
                     });
                 });
                 if(repasoList) repasoList.innerHTML = ''; // Clear repaso list


                 questions.forEach((questionDiv, index) => {
                     const correctAnswerValue = questionDiv.dataset.correct;
                     const questionText = questionDiv.querySelector('p').textContent;
                     const options = questionDiv.querySelectorAll('.quiz-option');
                     const selectedRadio = form.querySelector(`input[name="${options[0].querySelector('input').name}"]:checked`); // Find based on name


                     if (selectedRadio) { // Check if an answer was selected
                         const selectedLabel = selectedRadio.closest('.quiz-option');
                         if (selectedRadio.value === correctAnswerValue) {
                             selectedLabel.classList.add('selected-correct');
                         } else {
                             selectedLabel.classList.add('selected-incorrect');
                             allCorrect = false;
                             incorrectQuestionsInfo.push({ index: index + 1, text: questionText });
                         }
                     } else { // No answer selected for this question
                         allCorrect = false;
                         incorrectQuestionsInfo.push({ index: index + 1, text: "Pregunta " + (index+1) + " no respondida." });
                     }
                 });


                 feedbackDiv.classList.remove('hidden', 'correct', 'incorrect');
                 if (allCorrect) {
                     feedbackDiv.textContent = '¡Todas las respuestas son correctas!';
                     feedbackDiv.classList.add('correct');
                     if(repasoSection) repasoSection.classList.add('hidden');
                     if(retryButton) retryButton.classList.add('hidden');
                     if(nextButton) nextButton.classList.remove('hidden');
                     if(verifyButton) verifyButton.disabled = true; // Disable verify after success


                     const nextSectionSelector = form.dataset.next;
                     const missionToUnlock = form.dataset.unlockMission;
                     if(nextSectionSelector) unlockLink(`#link-${nextSectionSelector.substring(1)}`);
                     if(missionToUnlock) unlockMission(missionToUnlock);

                 } else {
                     feedbackDiv.textContent = 'Algunas respuestas son incorrectas. ¡Revisa la retroalimentación visual e inténtalo de nuevo!';
                     feedbackDiv.classList.add('incorrect');

                     // Populate and show repaso section
                     if (repasoSection && repasoList && incorrectQuestionsInfo.length > 0) {
                        incorrectQuestionsInfo.forEach(info => {
                            const li = document.createElement('li');
                            // Find the actual question text more reliably if needed
                            const qTextElement = questions[info.index - 1]?.querySelector('p');
                            const qText = qTextElement ? qTextElement.textContent : `Pregunta ${info.index}`;
                            li.textContent = `Pregunta ${info.index}: ${qText.substring(0,50)}...`; // Show question number and snippet
                            repasoList.appendChild(li);
                        });
                        repasoSection.classList.remove('hidden');
                     } else if (repasoSection) {
                         repasoSection.classList.add('hidden'); // Hide if somehow no incorrect info was gathered
                     }

                     if(retryButton) retryButton.classList.remove('hidden');
                     if(nextButton) nextButton.classList.add('hidden');
                     if(verifyButton) verifyButton.disabled = false; // Keep verify enabled
                 }
             }

            // --- Event Listeners ---
             sidebar.addEventListener('click', (e) => {
                 const link = e.target.closest('a.nav-item:not(.disabled)');
                 if (link && link.getAttribute('href').startsWith('#')) {
                     e.preventDefault();
                     const targetId = link.getAttribute('href').substring(1);
                     showContent(targetId);
                     if (window.innerWidth < 768) {
                        sidebar.classList.add('-translate-x-full');
                     }
                 }
             });

             const startBtn = document.getElementById('start-btn');
             if(startBtn){
                startBtn.addEventListener('click', () => {
                   const nextTarget = startBtn.dataset.next;
                   if(nextTarget) {
                       unlockLink(`#link-${nextTarget.substring(1)}`);
                       showContent(nextTarget.substring(1));
                   }
                });
             }

            nextButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                     e.preventDefault();
                     const nextTarget = button.dataset.next;
                     if (nextTarget) {
                         showContent(nextTarget.substring(1));
                     }
                });
            });

            // Add listener for retry buttons
             retryButtons.forEach(button => {
                 button.addEventListener('click', (e) => {
                     e.preventDefault();
                     const form = button.closest('form');
                     if (form) {
                         resetQuizState(form);
                     }
                 });
             });


            const quizForms = document.querySelectorAll('.quiz-form');
            quizForms.forEach(form => {
                form.addEventListener('submit', function (e) {
                    e.preventDefault();
                    handleQuizSubmission(form);
                });
            });

            // Sidebar Collapse Logic
            mobileToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                sidebar.classList.toggle('-translate-x-full');
            });

            desktopToggle.addEventListener('click', () => {
                sidebar.classList.toggle('sidebar-collapsed');
                body.classList.toggle('sidebar-is-collapsed');
                desktopToggleIcon.classList.toggle('fa-angle-double-left');
                desktopToggleIcon.classList.toggle('fa-angle-double-right');
            });

            // Modal Logic
            const showSolutionBtn = document.getElementById('show-solution-btn');
            const solutionModal = document.getElementById('solution-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            if(showSolutionBtn) showSolutionBtn.addEventListener('click', () => solutionModal.classList.remove('hidden'));
            if(closeModalBtn) closeModalBtn.addEventListener('click', () => solutionModal.classList.add('hidden'));
            solutionModal.addEventListener('click', (e) => { if (e.target === solutionModal) solutionModal.classList.add('hidden'); });
            
             // Initial State
             showContent(activeSectionId);
             unlockLink('#link-introduccion');
        });
    </script>
</body>
</html>

